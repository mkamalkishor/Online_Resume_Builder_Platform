{% extends 'base.html' %}
{% block title %}Admin Portal Access{% endblock %}

{% block content %}

<style>
    /* Hide the default navbar/footer from base.html if possible, 
       or overlay this content on top using fixed positioning */
    body {
        background-color: #fff;
        overflow-x: hidden;
    }

    /* FULL SCREEN SPLIT LAYOUT */
    .admin-wrapper {
        min-height: 100vh;
        width: 100%;
        display: flex;
        flex-wrap: wrap;
    }

    /* 1. LEFT SIDE: VISUAL */
    .admin-visual {
        flex: 1;
        background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80');
        background-size: cover;
        background-position: center;
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 3rem;
        color: white;
        min-height: 300px;
        /* For mobile */
    }

    /* Dark Overlay */
    .admin-visual::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 58, 138, 0.8) 100%);
        z-index: 1;
    }

    .visual-content {
        position: relative;
        z-index: 2;
    }

    /* 2. RIGHT SIDE: FORM */
    .admin-form-container {
        flex: 0 0 500px;
        /* Fixed width on desktop */
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 3rem;
        position: relative;
    }

    @media (max-width: 992px) {
        .admin-form-container {
            flex: 100%;
            height: auto;
            padding: 2rem;
        }
    }

    /* Input Styling */
    .form-floating>.form-control:focus~label {
        color: #0f172a;
        /* Dark Slate */
    }

    .form-control:focus {
        border-color: #0f172a;
        box-shadow: 0 0 0 0.25rem rgba(15, 23, 42, 0.1);
    }

    .btn-admin {
        background-color: #0f172a;
        color: white;
        border: none;
        padding: 12px;
        font-weight: 600;
        letter-spacing: 0.5px;
        transition: all 0.2s;
    }

    .btn-admin:hover {
        background-color: #1e293b;
        transform: translateY(-1px);
        color: white;
    }

    .password-toggle {
        cursor: pointer;
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        color: #94a3b8;
    }
</style>

<div class="admin-wrapper">

    <div class="admin-visual">
        <div class="visual-content">
            <div class="d-flex align-items-center mb-4">
                <div class="bg-white bg-opacity-10 p-2 rounded me-3">
                    <i class="bi bi-shield-lock-fill fs-3 text-white"></i>
                </div>
                <h4 class="fw-bold mb-0">Secure Admin Portal</h4>
            </div>
        </div>

        <div class="visual-content">
            <h1 class="display-4 fw-bold mb-3">Manage your platform with confidence.</h1>
            <p class="lead opacity-75">
                Monitor user statistics, manage templates, and oversee system health from one centralized dashboard.
            </p>
        </div>

        <div class="visual-content">
            <small class="opacity-50">Â© 2026 ResumeBuilder Systems Inc. Authorized Personnel Only.</small>
        </div>
    </div>

    <div class="admin-form-container">
        <div class="w-100" style="max-width: 380px;">

            <div class="text-center mb-5">
                <h3 class="fw-bold text-dark">Admin Sign In</h3>
                <p class="text-muted small">Please enter your administrative credentials.</p>
            </div>

            {% if error %}
            <div class="alert alert-danger d-flex align-items-center small" role="alert">
                <i class="bi bi-exclamation-octagon-fill me-2"></i>
                <div>{{ error }}</div>
            </div>
            {% endif %}

            <form method="post">
                {% csrf_token %}

                <div class="form-floating mb-3">
                    <input type="text" name="username" class="form-control" id="adminUser" placeholder="Username"
                        required>
                    <label for="adminUser">Admin Username</label>
                </div>

                <div class="form-floating mb-4 position-relative">
                    <input type="password" name="password" class="form-control" id="adminPass" placeholder="Password"
                        required>
                    <label for="adminPass">Password</label>
                    <i class="bi bi-eye-slash-fill password-toggle" id="togglePassword"></i>
                </div>

                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="flexCheckDefault">
                        <label class="form-check-label small text-muted" for="flexCheckDefault">
                            Keep me logged in
                        </label>
                    </div>
                    <a href="#" class="small text-decoration-none text-muted">Forgot credentials?</a>
                </div>

                <button type="submit" class="btn btn-admin w-100 w-100 rounded-3">
                    Authenticate <i class="bi bi-arrow-right ms-2"></i>
                </button>

            </form>

            <div class="mt-5 text-center border-top pt-4">
                <p class="small text-muted mb-0">Not an admin?</p>
                <a href="{% url 'login' %}" class="fw-bold text-dark text-decoration-none small">Return to User
                    Login</a>
            </div>

        </div>
    </div>

</div>

<script>
    // Password Visibility Toggle Logic
    const togglePassword = document.querySelector('#togglePassword');
    const password = document.querySelector('#adminPass');

    togglePassword.addEventListener('click', function (e) {
        // toggle the type attribute
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);

        // toggle the eye icon class
        this.classList.toggle('bi-eye');
        this.classList.toggle('bi-eye-slash-fill');
    });
</script>

{% endblock %}